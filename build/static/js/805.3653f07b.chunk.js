"use strict";(self.webpackChunktour_guide_ai=self.webpackChunktour_guide_ai||[]).push([[805],{82805:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var n=r(82483),a=r(52891),o=r(59927),s=r(79533),i=r(13730),l=r(77924),c=r(65470),u=r(16253),d=r(52307),h=r(29858),A=r(91071),m=r(7636),b=r(98717),g=r(3888),f=r(99440),x=r(95619),p=r(20792),E=r(43838),_=r(19253),w=r(56151),k=r(77538),y=r(65571),C=r(20860);const P=[],S=["bug","feature-request","ux-improvement","performance-issue","documentation","general"],v={bug:["bug","error","broken","not working","issue","problem","crash","exception"],"feature-request":["feature","add","new","would like","wish","missing","enhance"],"ux-improvement":["ui","ux","interface","design","layout","confusing","unclear","difficult"],"performance-issue":["slow","performance","lag","fast","loading","response time","timeout"],documentation:["docs","documentation","instructions","help","tutorial","explain","guide"],general:["feedback","comment","suggestion","opinion","thought"]};const j=new class{async submitFeedback(e){try{const t=await C.A.checkAuthStatus();if(!t)throw new Error("User must be authenticated to submit feedback");const r=`feedback_${Date.now()}_${Math.floor(1e3*Math.random())}`,n=this.categorizeFeedback(e.content),a={id:r,userId:t.id,userEmail:t.email,type:e.type||"general",category:n,content:e.content,sentiment:this.analyzeSentiment(e.content),screenshot:e.screenshot||null,metadata:{browser:this.getBrowserInfo(),url:window.location.href,timestamp:(new Date).toISOString(),appVersion:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ANALYTICS_REFRESH_INTERVAL:"30000 # 30 seconds",REACT_APP_API_URL:"http://localhost:3000/api",REACT_APP_BETA_INVITE_REQUIRED:"true",REACT_APP_CACHE_DURATION:"3600000 # 1 hour in milliseconds",REACT_APP_CACHE_EXPIRY:"86400 # 24 hours in seconds",REACT_APP_ENABLE_ANALYTICS:"true",REACT_APP_ENABLE_DEBUG_MODE:"true",REACT_APP_ENABLE_FEEDBACK:"true",REACT_APP_ENABLE_OFFLINE_MODE:"true",REACT_APP_ENABLE_SURVEYS:"true",REACT_APP_GOOGLE_MAPS_API_KEY:"",REACT_APP_MAX_CACHE_SIZE:"52428800 # 50MB in bytes",REACT_APP_MAX_SURVEY_QUESTIONS:"20",REACT_APP_OPENAI_API_KEY:"",REACT_APP_USE_SERVER_PROXY:"true"}.REACT_APP_VERSION||"0.0.0"},status:"new"};return P.push(a),console.log("Feedback submitted:",a),a}catch(t){throw console.error("Feedback submission error:",t),t}}async getUserFeedback(){try{const e=await C.A.checkAuthStatus();return e?P.filter((t=>t.userId===e.id)):[]}catch(e){return console.error("Error fetching user feedback:",e),[]}}async getAllFeedback(){try{const e=await C.A.checkAuthStatus(),t=await C.A.isAdmin();if(!e||!t)throw new Error("Admin access required");return P}catch(e){throw console.error("Error fetching all feedback:",e),e}}categorizeFeedback(e){if(!e)return"general";const t=e.toLowerCase(),r={};for(const[o,s]of Object.entries(v)){r[o]=0;for(const e of s)t.includes(e.toLowerCase())&&(r[o]+=1)}let n=0,a="general";for(const[o,s]of Object.entries(r))s>n&&(n=s,a=o);return a}analyzeSentiment(e){if(!e)return"neutral";const t=e.toLowerCase(),r=["good","great","excellent","amazing","awesome","like","love","best"],n=["bad","poor","terrible","awful","worst","hate","difficult","not working"];let a=0,o=0;for(const s of r)t.includes(s)&&a++;for(const s of n)t.includes(s)&&o++;return a>o?"positive":o>a?"negative":"neutral"}getBrowserInfo(){const e=navigator.userAgent;let t="Unknown";return e.match(/chrome|chromium|crios/i)?t="Chrome":e.match(/firefox|fxios/i)?t="Firefox":e.match(/safari/i)?t="Safari":e.match(/opr\//i)?t="Opera":e.match(/edg/i)&&(t="Edge"),{name:t,userAgent:e,platform:navigator.platform,language:navigator.language,screenSize:`${window.screen.width}x${window.screen.height}`}}getCategories(){return S}async updateFeedbackStatus(e,t){try{if(!await C.A.isAdmin())throw new Error("Admin access required");const r=P.findIndex((t=>t.id===e));if(-1===r)throw new Error("Feedback not found");return P[r].status=t,P[r]}catch(r){throw console.error("Error updating feedback status:",r),r}}};var R=r(8983),T=r.n(R),I=r(56723);const F=()=>{const[e,t]=(0,n.useState)(!1),[r,C]=(0,n.useState)(!1),[P,S]=(0,n.useState)(!1),[v,R]=(0,n.useState)(!1),[F,O]=(0,n.useState)(null),[L,N]=(0,n.useState)("general"),[z,D]=(0,n.useState)(""),[U,B]=(0,n.useState)(null),[H,M]=(0,n.useState)(!1),Y=(0,n.useRef)(null),V=()=>{t(!e),e||(C(!1),D(""),N("general"),B(null),O(null),R(!1))},K=()=>{R(!1)},W=()=>{O(null)};return(0,I.jsxs)(a.A,{ref:Y,sx:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3},children:[(0,I.jsx)(o.A,{open:v,autoHideDuration:3e3,onClose:K,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,I.jsx)(s.A,{onClose:K,severity:"success",sx:{width:"100%"},children:"Feedback submitted successfully!"})}),(0,I.jsx)(o.A,{open:!!F,autoHideDuration:5e3,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,I.jsx)(s.A,{onClose:W,severity:"error",sx:{width:"100%"},children:F})}),(0,I.jsx)(i.A,{in:e,children:(0,I.jsxs)(l.A,{elevation:3,sx:{width:320,mb:2,overflow:"hidden",display:e?"block":"none"},children:[(0,I.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",bgcolor:"primary.main",color:"primary.contrastText",px:2,py:1},children:[(0,I.jsx)(c.A,{variant:"subtitle1",children:"Provide Feedback"}),(0,I.jsx)(u.A,{size:"small",onClick:V,sx:{color:"primary.contrastText"},children:(0,I.jsx)(E.A,{})})]}),(0,I.jsxs)(a.A,{sx:{p:2},children:[(0,I.jsxs)(d.A,{fullWidth:!0,variant:"outlined",margin:"normal",size:"small",children:[(0,I.jsx)(h.A,{id:"feedback-type-label",children:"Feedback Type"}),(0,I.jsx)(A.A,{labelId:"feedback-type-label",id:"feedback-type",value:L,onChange:e=>{N(e.target.value)},label:"Feedback Type",disabled:P,children:[{value:"general",label:"General Feedback"},{value:"bug",label:"Report a Bug"},{value:"feature",label:"Feature Request"},{value:"ux",label:"User Experience"},{value:"performance",label:"Performance Issue"}].map((e=>(0,I.jsx)(m.A,{value:e.value,children:e.label},e.value)))})]}),(0,I.jsx)(b.A,{fullWidth:!0,multiline:!0,rows:4,margin:"normal",label:"Your Feedback",placeholder:"Tell us what you think...",value:z,onChange:e=>{D(e.target.value)},disabled:P}),U&&(0,I.jsxs)(a.A,{sx:{mt:1,position:"relative",width:"100%",height:150,borderRadius:1,overflow:"hidden"},children:[(0,I.jsx)("img",{src:U,alt:"Screenshot",style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,I.jsx)(u.A,{size:"small",sx:{position:"absolute",top:5,right:5,bgcolor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{bgcolor:"rgba(0, 0, 0, 0.7)"}},onClick:()=>{B(null)},children:(0,I.jsx)(E.A,{fontSize:"small"})})]}),(0,I.jsxs)(a.A,{sx:{mt:2},children:[(0,I.jsxs)(a.A,{onClick:()=>{C(!r)},sx:{display:"flex",alignItems:"center",cursor:"pointer",color:"text.secondary"},children:[(0,I.jsx)(_.A,{sx:{transform:r?"rotate(180deg)":"rotate(0)",transition:"transform 0.3s"}}),(0,I.jsx)(c.A,{variant:"body2",children:"Advanced Options"})]}),(0,I.jsx)(g.A,{in:r,children:(0,I.jsx)(a.A,{sx:{mt:1,display:"flex",gap:1},children:(0,I.jsx)(f.A,{title:"Take Screenshot",children:(0,I.jsx)(x.A,{variant:"outlined",size:"small",startIcon:(0,I.jsx)(w.A,{}),onClick:async()=>{try{M(!0),Y.current&&(Y.current.style.display="none");const e=(await T()(document.body)).toDataURL("image/png");Y.current&&(Y.current.style.display="block"),B(e),M(!1)}catch(F){console.error("Error capturing screenshot:",F),O("Failed to capture screenshot. Please try again."),M(!1),Y.current&&(Y.current.style.display="block")}},disabled:P||H,children:H?(0,I.jsx)(p.A,{size:20}):"Screenshot"})})})})]}),(0,I.jsx)(a.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,I.jsx)(x.A,{variant:"contained",color:"primary",endIcon:P?(0,I.jsx)(p.A,{size:20,color:"inherit"}):(0,I.jsx)(k.A,{}),onClick:async()=>{if(z.trim())try{S(!0),O(null),await j.submitFeedback({type:L,content:z,screenshot:U}),R(!0),D(""),B(null),setTimeout((()=>{t(!1),R(!1)}),3e3)}catch(F){console.error("Error submitting feedback:",F),O(F.message||"Failed to submit feedback. Please try again.")}finally{S(!1)}else O("Please provide feedback text")},disabled:P||!z.trim(),children:"Submit"})})]})]})}),(0,I.jsx)(f.A,{title:e?"Close Feedback":"Provide Feedback",children:(0,I.jsx)(x.A,{variant:"contained",color:"primary","aria-label":"feedback",onClick:V,startIcon:(0,I.jsx)(y.A,{}),sx:{borderRadius:"50%",minWidth:"56px",width:"56px",height:"56px",p:0,"& .MuiButton-startIcon":{margin:0}},children:(0,I.jsx)("span",{className:"sr-only",children:"Feedback"})})})]})}}}]);
//# sourceMappingURL=805.3653f07b.chunk.js.map