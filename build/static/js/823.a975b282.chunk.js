"use strict";(self.webpackChunktour_guide_ai=self.webpackChunktour_guide_ai||[]).push([[823],{21823:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(82483),i=a(93376),s=a(35238),n=a(56723);const o={user_name:"uid001",user_query:"wish a 3-day US travel plan during christmas!",user_intent_recognition:[{arrival:"united states",departure:"",arrival_date:"christmas day",departure_date:"",travel_duration:"3 days",entertainment_prefer:"",transportation_prefer:"",accommodation_prefer:"",total_cost_prefer:"",user_time_zone:"GMT-4",user_personal_need:""}],created_date:"2025-01-01"},d={user_profile:"https://randomuser.me/api/portraits/men/1.jpg",user_name:"uid001",user_route_id:"uid001-1",user_route_rank:1,created_date:"2025-01-01",upvotes:100,user_route_name:"a 3-day US travel plan",travel_split_by_day:[{travel_day:1,current_date:"2025/03/10",dairy_routes:[{route_id:"r001",departure_site:"Hotel Washington",arrival_site:"Smithsonian National Museum of Natural History",departure_time:"2025/03/10 9.00 AM(GMT-4)",arrival_time:"2025/03/10 9.16 AM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"walk",duration:"14",duration_unit:"minute",distance:.7,distance_unit:"mile",recommended_reason:"From dinosaur exhibits to displays of rare gems, this acclaimed museum celebrates the natural world."},{route_id:"r002",departure_site:"Smithsonian National Museum of Natural History",arrival_site:"National Air and Space Museum",departure_time:"2025/03/10 11.30 AM(GMT-4)",arrival_time:"2025/03/10 11.45 AM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"walk",duration:"15",duration_unit:"minute",distance:.8,distance_unit:"mile",recommended_reason:"Explore the history of flight and space exploration at this fascinating museum."},{route_id:"r003",departure_site:"National Air and Space Museum",arrival_site:"Lincoln Memorial",departure_time:"2025/03/10 2.00 PM(GMT-4)",arrival_time:"2025/03/10 2.20 PM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"taxi",duration:"20",duration_unit:"minute",distance:2.1,distance_unit:"mile",recommended_reason:"This iconic memorial honors Abraham Lincoln and offers stunning views of the National Mall."}]},{travel_day:2,current_date:"2025/03/11",dairy_routes:[{route_id:"r004",departure_site:"Hotel Washington",arrival_site:"White House",departure_time:"2025/03/11 9.00 AM(GMT-4)",arrival_time:"2025/03/11 9.10 AM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"walk",duration:"10",duration_unit:"minute",distance:.5,distance_unit:"mile",recommended_reason:"The official residence and workplace of the President of the United States."},{route_id:"r005",departure_site:"White House",arrival_site:"National Gallery of Art",departure_time:"2025/03/11 11.00 AM(GMT-4)",arrival_time:"2025/03/11 11.20 AM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"walk",duration:"20",duration_unit:"minute",distance:1,distance_unit:"mile",recommended_reason:"One of the world's finest art museums with an impressive collection spanning centuries."}]},{travel_day:3,current_date:"2025/03/12",dairy_routes:[{route_id:"r006",departure_site:"Hotel Washington",arrival_site:"United States Capitol",departure_time:"2025/03/12 9.00 AM(GMT-4)",arrival_time:"2025/03/12 9.25 AM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"taxi",duration:"25",duration_unit:"minute",distance:2.3,distance_unit:"mile",recommended_reason:"The meeting place of the United States Congress and the seat of the legislative branch of the U.S. federal government."},{route_id:"r007",departure_site:"United States Capitol",arrival_site:"Library of Congress",departure_time:"2025/03/12 11.30 AM(GMT-4)",arrival_time:"2025/03/12 11.40 AM(GMT-4)",user_time_zone:"GMT-4",transportation_type:"walk",duration:"10",duration_unit:"minute",distance:.5,distance_unit:"mile",recommended_reason:"The largest library in the world, with millions of books, recordings, photographs, newspapers, maps and manuscripts."}]}]},l=[{id:"np1",name:"National Museum of American History",position:{lat:38.8911,lng:-77.03},address:"1300 Constitution Ave NW, Washington, DC 20560",reviews:[{user:"John D.",text:"Amazing collection of American artifacts!"},{user:"Sarah M.",text:"Spent hours here, very educational."},{user:"Mike T.",text:"The First Ladies exhibit was fascinating."},{user:"Lisa R.",text:"Great for history buffs of all ages."},{user:"David K.",text:"Well organized and informative displays."}]},{id:"np2",name:"Washington Monument",position:{lat:38.8895,lng:-77.0353},address:"2 15th St NW, Washington, DC 20024",reviews:[{user:"Emma S.",text:"The view from the top is breathtaking!"},{user:"Robert J.",text:"Iconic monument, a must-see in DC."},{user:"Patricia L.",text:"Get tickets in advance to avoid long lines."},{user:"Thomas B.",text:"Beautiful at sunset."},{user:"Jennifer W.",text:"Great photo opportunity."}]},{id:"np3",name:"National Gallery of Art Sculpture Garden",position:{lat:38.8913,lng:-77.0231},address:"Constitution Ave NW &, 7th St NW, Washington, DC 20408",reviews:[{user:"Richard M.",text:"Peaceful oasis in the middle of the city."},{user:"Karen P.",text:"Beautiful sculptures in a lovely setting."},{user:"Daniel T.",text:"Great place to relax after museum visits."},{user:"Nancy C.",text:"The fountain is beautiful in summer."},{user:"Paul S.",text:"Ice skating in winter is a fun activity here."}]}],u={width:"100%",height:"500px"},c={lat:38.8977,lng:-77.0365},m={disableDefaultUI:!0,zoomControl:!0},p=()=>{var e;const t=(0,i.zy)(),[a,p]=(0,r.useState)(null),[_,h]=(0,r.useState)(d),[g,v]=(0,r.useState)(o),{isLoaded:y,loadError:x}=(0,s.RH)({googleMapsApiKey:"",libraries:["places"]});(0,r.useEffect)((()=>{if(t.state){if(console.log("Route data from navigation:",t.state),t.state.routeData){const e=f(t.state.routeData,t.state.userQuery);h(e)}t.state.userQuery&&v({user_name:"current_user",user_query:t.state.userQuery,user_intent_recognition:t.state.intentData?[t.state.intentData.intent]:o.user_intent_recognition,created_date:(new Date).toISOString().split("T")[0]})}}),[t]),(0,r.useEffect)((()=>(console.log("MapPage component mounted successfully"),()=>{console.log("MapPage component unmounted")})),[]);const f=(e,t)=>{if(!e)return d;try{const t={user_profile:"https://randomuser.me/api/portraits/men/1.jpg",user_name:"current_user",user_route_id:`route-${Date.now()}`,user_route_rank:1,created_date:(new Date).toISOString().split("T")[0],upvotes:0,user_route_name:e.route_name||`${e.destination} Trip`,travel_split_by_day:[]};return e.daily_itinerary&&Array.isArray(e.daily_itinerary)&&(t.travel_split_by_day=e.daily_itinerary.map(((e,t)=>{const a=e.activities||[],r=[];for(let i=0;i<a.length-1;i++){const e=a[i],s=a[i+1];r.push({route_id:`r${t+1}-${i+1}`,departure_site:e.activity.split(" at ")[1]||e.activity,arrival_site:s.activity.split(" at ")[1]||s.activity,departure_time:`${(new Date).getFullYear()}/${String((new Date).getMonth()+1).padStart(2,"0")}/${String(t+1).padStart(2,"0")} ${e.time}`,arrival_time:`${(new Date).getFullYear()}/${String((new Date).getMonth()+1).padStart(2,"0")}/${String(t+1).padStart(2,"0")} ${s.time}`,user_time_zone:"Local",transportation_type:j(),duration:M(),duration_unit:"minute",distance:N(),distance_unit:"mile",recommended_reason:w(s.activity)})}return{travel_day:e.day||t+1,current_date:`${(new Date).getFullYear()}/${String((new Date).getMonth()+1).padStart(2,"0")}/${String(t+1).padStart(2,"0")}`,dairy_routes:r}}))),t}catch(a){return console.error("Error transforming route data:",a),d}},j=()=>{const e=["walk","taxi","bus","subway","bike"];return e[Math.floor(Math.random()*e.length)]},M=()=>String(Math.floor(30*Math.random())+10),N=()=>(2*Math.random()+.5).toFixed(1),w=e=>{if(!e)return"A must-visit destination on your trip.";const t=[`Discover ${e} - a highlight of the area.`,`${e} offers an unforgettable experience.`,`Don't miss ${e} during your visit.`,`${e} is popular among travelers for good reason.`,`Experience the unique atmosphere of ${e}.`];return t[Math.floor(Math.random()*t.length)]},S=()=>{console.log("Displaying route on map")},T=()=>(console.log("Getting nearby interest points"),l),b=e=>{p(e)};return(0,n.jsxs)("div",{className:"map-page",children:[(0,n.jsx)("h1",{className:"page-title",children:"Interactive Map"}),(0,n.jsx)("div",{className:"map-container","data-testid":"map-container",children:x?(0,n.jsxs)("div",{className:"map-error-container",children:[(0,n.jsx)("h3",{children:"Error loading maps"}),(0,n.jsx)("p",{children:"There was an error loading Google Maps. Please check your API key configuration."}),(0,n.jsxs)("p",{className:"error-details",children:["Error: ",x.message]})]}):y?(0,n.jsxs)(s.u6,{mapContainerStyle:u,zoom:14,center:c,options:m,onLoad:S,children:[_.travel_split_by_day.flatMap((e=>e.dairy_routes.map((e=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(s.pH,{position:{lat:38.8977+.02*(Math.random()-.5),lng:.02*(Math.random()-.5)-77.0365},onClick:()=>b({id:`departure-${e.route_id}`,name:e.departure_site,position:{lat:38.8977+.02*(Math.random()-.5),lng:.02*(Math.random()-.5)-77.0365}})},`departure-${e.route_id}`),(0,n.jsx)(s.pH,{position:{lat:38.8977+.02*(Math.random()-.5),lng:.02*(Math.random()-.5)-77.0365},onClick:()=>b({id:`arrival-${e.route_id}`,name:e.arrival_site,position:{lat:38.8977+.02*(Math.random()-.5),lng:.02*(Math.random()-.5)-77.0365}})},`arrival-${e.route_id}`)]},e.route_id))))),T().map((e=>{return(0,n.jsx)(s.pH,{position:e.position,icon:{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",scaledSize:(t=32,a=32,y&&window.google&&window.google.maps&&window.google.maps.Size?new window.google.maps.Size(t,a):{width:t,height:a})},onClick:()=>b(e)},e.id);var t,a})),a&&(0,n.jsx)(s.Fu,{position:a.position,onCloseClick:()=>p(null),children:(0,n.jsxs)("div",{className:"info-window",children:[(0,n.jsx)("h3",{children:a.name}),a.address&&(0,n.jsx)("p",{children:a.address}),a.reviews&&a.reviews.length>0&&(0,n.jsxs)("div",{className:"reviews",children:[(0,n.jsx)("h4",{children:"Reviews"}),a.reviews.map(((e,t)=>(0,n.jsxs)("div",{className:"review",children:[(0,n.jsxs)("div",{className:"review-rating",children:[e.rating,"/5"]}),(0,n.jsx)("div",{className:"review-text",children:e.text})]},t)))]})]})})]}):(0,n.jsx)("div",{className:"map-loading",children:"Loading maps..."})}),(0,n.jsxs)("div",{className:"user-input-box",children:[(0,n.jsx)("h2",{children:"User Query"}),(0,n.jsxs)("div",{className:"query-display",children:[(0,n.jsx)("p",{children:g.user_query}),(0,n.jsxs)("div",{className:"intent-recognition",children:[(0,n.jsx)("h3",{children:"Recognized Intent"}),(0,n.jsx)("ul",{children:g.user_intent_recognition.map(((e,t)=>(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Destination:"})," ",e.arrival||"Not specified",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Travel Period:"})," ",e.arrival_date||"Not specified",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Duration:"})," ",e.travel_duration||"Not specified"]},t)))})]})]})]}),(0,n.jsxs)("div",{className:"route-timeline",children:[(0,n.jsx)("h2",{children:"Your Itinerary"}),(0,n.jsxs)("div",{className:"route-details",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Destination:"})," ",_.user_route_name&&_.user_route_name.includes(" in ")?_.user_route_name.split(" in ")[1]:"Rome, Italy"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Duration:"})," ",(null===(e=g.user_intent_recognition[0])||void 0===e?void 0:e.travel_duration)||"3 days"]})]}),(0,n.jsx)("div",{className:"timeline-container",children:(console.log("Splitting route by day"),_.travel_split_by_day).map((e=>(0,n.jsxs)("div",{className:"day-container",children:[(0,n.jsxs)("div",{className:"day-header",children:[(0,n.jsxs)("h3",{children:["Day ",e.travel_day]}),(0,n.jsx)("span",{className:"day-date",children:e.current_date})]}),(0,n.jsx)("div",{className:"routes-container",children:e.dairy_routes.map((e=>(0,n.jsxs)("div",{className:"route-item",children:[(0,n.jsx)("div",{className:"timeline-marker"}),(0,n.jsxs)("div",{className:"route-content",children:[(0,n.jsxs)("div",{className:"route-sites",children:[(0,n.jsxs)("div",{className:"departure-site",children:[(0,n.jsx)("span",{className:"time",children:e.departure_time.split(" ")[1]}),(0,n.jsx)("span",{className:"site-name",children:e.departure_site})]}),(0,n.jsxs)("div",{className:"transportation",children:[(0,n.jsx)("span",{className:"transport-type",children:e.transportation_type}),(0,n.jsxs)("span",{className:"transport-details",children:[e.duration," ",e.duration_unit," \u2022 ",e.distance," ",e.distance_unit]})]}),(0,n.jsxs)("div",{className:"arrival-site",children:[(0,n.jsx)("span",{className:"time",children:e.arrival_time.split(" ")[1]}),(0,n.jsx)("span",{className:"site-name",children:e.arrival_site})]})]}),(0,n.jsx)("div",{className:"recommendation",children:(0,n.jsx)("p",{children:e.recommended_reason})})]})]},e.route_id)))})]},e.travel_day)))})]}),(0,n.jsxs)("div",{className:"nearby-points",children:[(0,n.jsx)("h2",{children:"Nearby Points of Interest"}),(0,n.jsx)("div",{className:"points-list",children:T().map((e=>(0,n.jsxs)("div",{className:"point-item",children:[(0,n.jsx)("h3",{children:e.name}),e.address&&(0,n.jsx)("p",{children:e.address})]},e.id)))})]}),(0,n.jsx)("div",{className:"loading-state",style:{display:"none"},children:"Loading route data..."}),(0,n.jsx)("div",{className:"error-state",style:{display:"none"},children:"Route not found"})]})}}}]);
//# sourceMappingURL=823.a975b282.chunk.js.map