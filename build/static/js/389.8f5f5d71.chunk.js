"use strict";(self.webpackChunktour_guide_ai=self.webpackChunktour_guide_ai||[]).push([[389],{20792:(e,r,t)=>{t.d(r,{A:()=>I});var s=t(98587),a=t(58168),n=t(82483),i=t(29765),o=t(97266),l=t(64122),c=t(71251),d=t(33790),h=t(26855),u=t(90292),A=t(4692);function v(e){return(0,A.Ay)("MuiCircularProgress",e)}(0,u.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var x=t(56723);const m=["className","color","disableShrink","size","style","thickness","value","variant"];let y,j,p,g,w=e=>e;const f=44,C=(0,l.i7)(y||(y=w`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),k=(0,l.i7)(j||(j=w`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),S=(0,h.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,c.A)(t.color)}`]]}})((e=>{let{ownerState:r,theme:t}=e;return(0,a.A)({display:"inline-block"},"determinate"===r.variant&&{transition:t.transitions.create("transform")},"inherit"!==r.color&&{color:(t.vars||t).palette[r.color].main})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&(0,l.AH)(p||(p=w`
      animation: ${0} 1.4s linear infinite;
    `),C)})),E=(0,h.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),b=(0,h.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.circle,r[`circle${(0,c.A)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})((e=>{let{ownerState:r,theme:t}=e;return(0,a.A)({stroke:"currentColor"},"determinate"===r.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===r.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&!r.disableShrink&&(0,l.AH)(g||(g=w`
      animation: ${0} 1.4s ease-in-out infinite;
    `),k)})),I=n.forwardRef((function(e,r){const t=(0,d.b)({props:e,name:"MuiCircularProgress"}),{className:n,color:l="primary",disableShrink:h=!1,size:u=40,style:A,thickness:y=3.6,value:j=0,variant:p="indeterminate"}=t,g=(0,s.A)(t,m),w=(0,a.A)({},t,{color:l,disableShrink:h,size:u,thickness:y,value:j,variant:p}),C=(e=>{const{classes:r,variant:t,color:s,disableShrink:a}=e,n={root:["root",t,`color${(0,c.A)(s)}`],svg:["svg"],circle:["circle",`circle${(0,c.A)(t)}`,a&&"circleDisableShrink"]};return(0,o.A)(n,v,r)})(w),k={},I={},z={};if("determinate"===p){const e=2*Math.PI*((f-y)/2);k.strokeDasharray=e.toFixed(3),z["aria-valuenow"]=Math.round(j),k.strokeDashoffset=`${((100-j)/100*e).toFixed(3)}px`,I.transform="rotate(-90deg)"}return(0,x.jsx)(S,(0,a.A)({className:(0,i.A)(C.root,n),style:(0,a.A)({width:u,height:u},I,A),ownerState:w,ref:r,role:"progressbar"},z,g,{children:(0,x.jsx)(E,{className:C.svg,ownerState:w,viewBox:"22 22 44 44",children:(0,x.jsx)(b,{className:C.circle,style:k,ownerState:w,cx:f,cy:f,r:(f-y)/2,fill:"none",strokeWidth:y})})}))}))},23389:(e,r,t)=>{t.r(r),t.d(r,{default:()=>L});var s=t(82483),a=t(52891),n=t(65470),i=t(95619),o=t(20792),l=t(60146),c=t(77924),d=t(95848),h=t(11035),u=t(15323),A=t(40975),v=t(95517),x=t(53678),m=t(16253),y=t(71756),j=t(29372),p=t(62856),g=t(19632),w=t(98587),f=t(58168),C=t(29765),k=t(97266),S=t(26855),E=t(77475),b=t(33790),I=t(90292),z=t(4692);function M(e){return(0,z.Ay)("MuiDialogContentText",e)}(0,I.A)("MuiDialogContentText",["root"]);var D=t(56723);const P=["children","className"],T=(0,S.Ay)(n.A,{shouldForwardProp:e=>(0,E.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,r)=>r.root})({}),N=s.forwardRef((function(e,r){const t=(0,b.b)({props:e,name:"MuiDialogContentText"}),{className:s}=t,a=(0,w.A)(t,P),n=(e=>{const{classes:r}=e,t=(0,k.A)({root:["root"]},M,r);return(0,f.A)({},r,t)})(a);return(0,D.jsx)(T,(0,f.A)({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:a,className:(0,C.A)(n.root,s)},t,{classes:n}))}));var $=t(98717),V=t(63696),R=t(11133),_=t(34414);const B=(0,_.A)((0,D.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),F=(0,_.A)((0,D.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),q=(0,_.A)((0,D.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block");var H=t(93846),U=t(45694),J=t(79518);const L=()=>{const[e,r]=(0,s.useState)([]),[t,w]=(0,s.useState)(!0),[f,C]=(0,s.useState)(null),[k,S]=(0,s.useState)(null),[E,b]=(0,s.useState)(!1),[I,z]=(0,s.useState)(null),[M,P]=(0,s.useState)(null),[T,_]=(0,s.useState)(!1);(0,s.useEffect)((()=>{L()}),[]);const L=async()=>{try{w(!0),C(null);const e=await H.A.getAllCodes();r(e)}catch(f){console.error("Error fetching invite codes:",f),C("Failed to load invitation codes")}finally{w(!1)}},X=e=>{navigator.clipboard.writeText(e).then((()=>{P(e),setTimeout((()=>P(null)),2e3)}))},G=()=>{b(!1),S(null),z(null)},W=e=>new Date(e).toLocaleString();return(0,D.jsxs)(a.A,{children:[(0,D.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,D.jsx)(n.A,{variant:"h6",children:"Invitation Code Management"}),(0,D.jsx)(U.aX,{permission:J.Jj.CREATE_INVITE,children:(0,D.jsx)(i.A,{variant:"contained",color:"primary",startIcon:(0,D.jsx)(R.A,{}),onClick:async()=>{try{_(!0),C(null);const e=await H.A.generateCode();S(e),b(!0),L()}catch(f){console.error("Error generating invite code:",f),C("Failed to generate invitation code")}finally{_(!1)}},disabled:T,children:T?(0,D.jsx)(o.A,{size:24}):"Generate New Code"})})]}),f&&(0,D.jsx)(l.A,{severity:"error",sx:{mb:2},children:f}),(0,D.jsx)(c.A,{children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(h.A,{children:[(0,D.jsx)(u.A,{children:(0,D.jsxs)(A.A,{children:[(0,D.jsx)(v.A,{children:"Code"}),(0,D.jsx)(v.A,{children:"Status"}),(0,D.jsx)(v.A,{children:"Created"}),(0,D.jsx)(v.A,{children:"Expires"}),(0,D.jsx)(v.A,{children:"Used By"}),(0,D.jsx)(U.aX,{permission:J.Jj.UPDATE_INVITE,children:(0,D.jsx)(v.A,{children:"Actions"})})]})}),(0,D.jsx)(x.A,{children:t?(0,D.jsx)(A.A,{children:(0,D.jsx)(v.A,{colSpan:6,align:"center",children:(0,D.jsx)(o.A,{})})}):0===e.length?(0,D.jsx)(A.A,{children:(0,D.jsx)(v.A,{colSpan:6,align:"center",children:"No invitation codes found. Generate a new one to get started."})}):e.map((e=>(0,D.jsxs)(A.A,{children:[(0,D.jsx)(v.A,{children:(0,D.jsxs)(a.A,{display:"flex",alignItems:"center",children:[e.code,(0,D.jsx)(m.A,{size:"small",onClick:()=>X(e.code),color:M===e.code?"success":"default",children:M===e.code?(0,D.jsx)(B,{}):(0,D.jsx)(F,{})})]})}),(0,D.jsx)(v.A,{children:e.isValid&&!e.usedBy?(0,D.jsx)(y.A,{label:"Valid",color:"success",size:"small"}):e.usedBy?(0,D.jsx)(y.A,{label:"Used",color:"primary",size:"small"}):(0,D.jsx)(y.A,{label:"Invalid",color:"error",size:"small"})}),(0,D.jsx)(v.A,{children:W(e.createdAt)}),(0,D.jsx)(v.A,{children:W(e.expiresAt)}),(0,D.jsx)(v.A,{children:e.usedBy||"-"}),(0,D.jsx)(U.aX,{permission:J.Jj.UPDATE_INVITE,children:(0,D.jsx)(v.A,{children:e.isValid&&!e.usedBy&&(0,D.jsx)(m.A,{color:"error",size:"small",onClick:()=>(e=>{z(e)})(e.code),children:(0,D.jsx)(q,{})})})})]},e.id)))})]})})}),(0,D.jsxs)(j.A,{open:E&&k,onClose:G,children:[(0,D.jsx)(p.A,{children:"New Invitation Code Generated"}),(0,D.jsxs)(g.A,{children:[(0,D.jsx)(N,{children:"Share this code with beta testers to grant them access. The code will expire after 14 days."}),(0,D.jsx)(a.A,{mt:2,mb:2,children:(0,D.jsx)($.A,{fullWidth:!0,variant:"outlined",value:(null===k||void 0===k?void 0:k.code)||"",InputProps:{readOnly:!0,endAdornment:(0,D.jsx)(m.A,{onClick:()=>X(null===k||void 0===k?void 0:k.code),color:M===(null===k||void 0===k?void 0:k.code)?"success":"default",children:M===(null===k||void 0===k?void 0:k.code)?(0,D.jsx)(B,{}):(0,D.jsx)(F,{})})}})})]}),(0,D.jsx)(V.A,{children:(0,D.jsx)(i.A,{onClick:G,children:"Close"})})]}),(0,D.jsxs)(j.A,{open:!!I,onClose:G,children:[(0,D.jsx)(p.A,{children:"Invalidate Invitation Code"}),(0,D.jsx)(g.A,{children:(0,D.jsx)(N,{children:"Are you sure you want to invalidate this invitation code? This action cannot be undone."})}),(0,D.jsxs)(V.A,{children:[(0,D.jsx)(i.A,{onClick:G,children:"Cancel"}),(0,D.jsx)(U.aX,{permission:J.Jj.UPDATE_INVITE,children:(0,D.jsx)(i.A,{onClick:async()=>{I&&(await(async e=>{try{C(null),await H.A.invalidateCode(e),L()}catch(f){console.error("Error invalidating invite code:",f),C("Failed to invalidate invitation code")}})(I),z(null))},color:"error",children:"Invalidate"})})]})]})]})}},93846:(e,r,t)=>{t.d(r,{A:()=>i});var s=t(45901),a=t(20860);t(97714);const n="/api/invite-codes";const i=new class{async generateCode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{sendEmail:r,recipientEmail:t}=e;return(await s.Ay.post(`${n}/generate`,{sendEmail:r,recipientEmail:t},{headers:(0,a.z)()})).data.inviteCode}catch(r){throw console.error("Error generating invite code:",r),r}}async getAllCodes(){try{return(await s.Ay.get(n,{headers:(0,a.z)()})).data.codes||[]}catch(e){throw console.error("Error getting invite codes:",e),e}}async validateCode(e){try{return(await s.Ay.post(`${n}/validate`,{code:e})).data.valid}catch(r){return console.error("Error validating invite code:",r),!1}}async invalidateCode(e){try{return!!(await s.Ay.post(`${n}/invalidate`,{code:e},{headers:(0,a.z)()})).data.message}catch(r){return console.error("Error invalidating invite code:",r),!1}}async sendInviteCodeEmail(e,r){try{return(await s.Ay.post(`${n}/send`,{code:e,email:r},{headers:(0,a.z)()})).data.emailSent}catch(t){return console.error("Error sending invite code email:",t),!1}}}},97714:(e,r,t)=>{t.d(r,{A:()=>i});var s=t(23509),a=t(20860);const n="/api/emails",i={requestEmailVerification:async()=>{try{return(await s.A.post(`${n}/resend-verification`,{},{headers:(0,a.z)()})).data}catch(e){throw console.error("Error requesting email verification:",e),e}},verifyEmail:async e=>{try{return(await s.A.post(`${n}/verify`,{token:e})).data}catch(r){throw console.error("Error verifying email:",r),r}},requestPasswordReset:async e=>{try{return(await s.A.post("/auth/request-password-reset",{email:e})).data}catch(r){throw console.error("Error requesting password reset:",r),r}},resetPassword:async(e,r)=>{try{return(await s.A.post("/auth/reset-password",{token:e,newPassword:r})).data}catch(t){throw console.error("Error resetting password:",t),t}},sendInviteCode:async(e,r)=>{try{return(await s.A.post(`${n}/send-invite`,{email:r,code:e},{headers:(0,a.z)()})).data}catch(t){throw console.error("Error sending invitation code:",t),t}}}}}]);
//# sourceMappingURL=389.8f5f5d71.chunk.js.map